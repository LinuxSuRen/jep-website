<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.40-DEV" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.e08a958ae3e530145318b6373195c765.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="" />
<meta property="og:description" content="Table 1. Metadata     JEP
 303
   Title
 Evergreen Client Registration and Authentication
   Sponsor
 R. Tyler Croy
   Status
 Accepted :ok_hand:
   Type
 Standards
   Created
 2018-03-21
   JIRA
 JENKINS-49810, JENKINS-50347
   BDFL-Delegate
 R. Tyler Croy
   Requires
 JEP-300, JEP-301
     Table of Contents Abstract Specification Claims Client Re-keying Token Revocation   Motivation Reasoning Non-interactive JSON Web Tokens JWT Expiry Alternative Approaches Jenkins Instance Identity JWT HMAC Request Signing     Backwards Compatibility Security TLS/SSL Certificate Pinning   Infrastructure Requirements Testing Prototype Implementation References    Abstract A major component of the Jenkins Evergreen initiative is the &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/jep/303/readme/" />
















<meta itemprop="name" content="">
<meta itemprop="description" content="Table 1. Metadata     JEP
 303
   Title
 Evergreen Client Registration and Authentication
   Sponsor
 R. Tyler Croy
   Status
 Accepted :ok_hand:
   Type
 Standards
   Created
 2018-03-21
   JIRA
 JENKINS-49810, JENKINS-50347
   BDFL-Delegate
 R. Tyler Croy
   Requires
 JEP-300, JEP-301
     Table of Contents Abstract Specification Claims Client Re-keying Token Revocation   Motivation Reasoning Non-interactive JSON Web Tokens JWT Expiry Alternative Approaches Jenkins Instance Identity JWT HMAC Request Signing     Backwards Compatibility Security TLS/SSL Certificate Pinning   Infrastructure Requirements Testing Prototype Implementation References    Abstract A major component of the Jenkins Evergreen initiative is the &#34;">



<meta itemprop="wordCount" content="2047">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="Table 1. Metadata     JEP
 303
   Title
 Evergreen Client Registration and Authentication
   Sponsor
 R. Tyler Croy
   Status
 Accepted :ok_hand:
   Type
 Standards
   Created
 2018-03-21
   JIRA
 JENKINS-49810, JENKINS-50347
   BDFL-Delegate
 R. Tyler Croy
   Requires
 JEP-300, JEP-301
     Table of Contents Abstract Specification Claims Client Re-keying Token Revocation   Motivation Reasoning Non-interactive JSON Web Tokens JWT Expiry Alternative Approaches Jenkins Instance Identity JWT HMAC Request Signing     Backwards Compatibility Security TLS/SSL Certificate Pinning   Infrastructure Requirements Testing Prototype Implementation References    Abstract A major component of the Jenkins Evergreen initiative is the &#34;"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      
      









    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <article class="flex-l flex-wrap justify-between mw8 center ph3 ph0-l">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1"></h1>
      
      <time class="f6 mv4 dib tracked" datetime="0001-01-01T00:00:00Z">January 1, 0001</time>
    </header>

    <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Metadata</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JEP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">303</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evergreen Client Registration and Authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sponsor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rtyler">R. Tyler Croy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accepted :ok_hand:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standards</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-03-21</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JIRA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jenkins-ci.org/browse/JENKINS-49810">JENKINS-49810</a>,
<a href="https://issues.jenkins-ci.org/browse/JENKINS-50347">JENKINS-50347</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BDFL-Delegate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rtyler">R. Tyler Croy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JEP-300, JEP-301</p></td>
</tr>
</tbody>
</table>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_specification">Specification</a>
<ul class="sectlevel2">
<li><a href="#claims">Claims</a></li>
<li><a href="#_client_re_keying">Client Re-keying</a></li>
<li><a href="#_token_revocation">Token Revocation</a></li>
</ul>
</li>
<li><a href="#_motivation">Motivation</a></li>
<li><a href="#_reasoning">Reasoning</a>
<ul class="sectlevel2">
<li><a href="#non-interactive">Non-interactive</a></li>
<li><a href="#jwt">JSON Web Tokens</a></li>
<li><a href="#_jwt_expiry">JWT Expiry</a></li>
<li><a href="#_alternative_approaches">Alternative Approaches</a>
<ul class="sectlevel3">
<li><a href="#_jenkins_instance_identity">Jenkins Instance Identity</a></li>
<li><a href="#_jwt_hmac_request_signing">JWT HMAC Request Signing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_backwards_compatibility">Backwards Compatibility</a></li>
<li><a href="#_security">Security</a>
<ul class="sectlevel2">
<li><a href="#tls">TLS/SSL</a></li>
<li><a href="#_certificate_pinning">Certificate Pinning</a></li>
</ul>
</li>
<li><a href="#_infrastructure_requirements">Infrastructure Requirements</a></li>
<li><a href="#_testing">Testing</a></li>
<li><a href="#_prototype_implementation">Prototype Implementation</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A major component of the
<a href="https://github.com/jenkinsci/jep/blob/master/jep/300">Jenkins Evergreen</a>
initiative is the "connected-ness" of an instance. This entails sending
telemetry and receiving updates from the Evergreen hosted services layer. In
order to safely, and correctly, provide these services, each instance must have
a unique <strong>identity</strong> and a means of truthfully conveying information to the
Evergreen hosted services layer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specification">Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This specification describes a <strong>non-interactive</strong> registration and
authentication mechanism to be performed by the <code>evergreen-client</code>, the reasons
why <a href="#non-interactive">Non-interactive</a> is an important aspect of this proposal can be found
below.</p>
</div>
<div class="paragraph">
<p>The <code>evergreen-client</code> must <em>initiate</em> the registration process by generating
<a href="https://en.wikipedia.org/wiki/Elliptic_Curve_DSA">ECDSA</a>
public and private keys. Similar to SSH-based public/private key
authentication, the public key will be shared with the Evergreen hosted
services layer, while the private key must be maintained entirely confidential
and unique to that Jenkins Evergreen instance.</p>
</div>
<div class="paragraph">
<p>Once the public/private key pair has been generated, the <code>evergreen-client</code>
must send a <code>registration</code> request which includes, but is not limited to, the
public key. The Registration Service&#8217;s responsibility is to persist the
client&#8217;s public key, generate a new UUID <sup class="footnote" id="_footnote_uuid">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup>,
and return the UUID to the client.</p>
</div>
<div class="paragraph">
<p>Once this exchange has successfully completed, the client should be in a
"registered" state.</p>
</div>
<div id="reg-diagram" class="listingblock">
<div class="title">Registration</div>
<div class="content">
<pre class="highlight"><code>               registration        status              evergreen
database         service           service              client
   |               |                  |                    |
   |               |                  |    &lt;generate ECDH pub/priv keypair&gt;
   |               |                  |                    |
   |               |     PUT with generated public key     |
   | store pub/key |&lt;--------------------------------------o
   |   and uuid    |                  |                    |
   |&lt;--------------o                  |                    |
   o-----/ok/-----&gt;|            HTTP 201 Created           |
   |               |          (respond with uuid)          |
   |               o--------------------------------------&gt;|
   |               |                  |                    |</code></pre>
</div>
</div>
<div class="paragraph">
<p>Clients in a registered state must log into the authentication service in order
to access any other resources in the Evergreen hosted service layer. A <code>login</code>
request consists of the UUID <sup class="footnoteref">[<a class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup>, signed by the client&#8217;s private
key. This provides the Authentication Service enough information to verify that
the client is authentic.</p>
</div>
<div class="listingblock">
<div class="title">Registration Payload</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "pubKey" : "my amazing example ECDSA key",
    "curve"  : "secp256k1"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Registration Headers</div>
<div class="content">
<pre class="highlight"><code>Content-Type: application/json</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Both fields are required and the registration request will fail if they are not
provided</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the client has been deemed authentic, the Authentication Service will
generate a <a href="https://jwt.io">JSON Web Token</a> (JWT) which must be encrypted
with a pre-shared key (PSK), known to the other backend services, but not the
client. Additionally, JWT must contain a <strong>14 day expiry</strong> for the <a href="#claims">Claims</a>
contained within the token. Reasoning for <a href="#jwt">JSON Web Tokens</a> can be found below.</p>
</div>
<div class="paragraph">
<p>The client must include this encrypted JWT in subsequent HTTP requests under
the <code>Authorization</code> header.</p>
</div>
<div id="login-diagram" class="listingblock">
<div class="title">Login</div>
<div class="content">
<pre class="highlight"><code>              authentication       status              evergreen
database         service           service              client
   |               |                  |                    |
   |               |       PUT uuid signed by private key  |
   |    get uuid   |&lt;--------------------------------------o
   |   and pubkey  |                  |                    |
   |&lt;--------------o                  |                    |
   o--------------&gt;|                  |                    |
   |       &lt;verify signature&gt;         |                    |
   |     &lt;generate JWT enc token&gt;     |                    |
   |               |            HTTP 200 Ok                |
   |               |         (respond with JWT)            |
   |               o--------------------------------------&gt;|
   |               |                  |                    |
   |               |                  |    Status request  |
   |               |                  |      (with JWT)    |
   |               |                  |&lt;-------------------o
   |               |                  |      HTTP 200      |
   |               |                  o-------------------&gt;|
   |               |                  |                    |</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated JWTs are <em>expected</em> to expire, and the client must gracefully
handle expired tokens. In the case of an expired JWT, the client must repeat
the <a href="#login-diagram">Login flow</a> once again, before re-attempting its original
request.</p>
</div>
<div class="listingblock">
<div class="title">Authentication Payload</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "uuid" : "uuidv4-provided-in-registration",
    "signature" : "hex-encoded-signature-of-uuid-signed-by-private-key"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Authentication Headers</div>
<div class="content">
<pre class="highlight"><code>Content-Type: application/json</code></pre>
</div>
</div>
<div class="paragraph">
<p>The client should perform an exponential backoff if it is unable to
successfully repeat the Login flow in order to avoid client or service-side
errors leading to cascading failures.</p>
</div>
<div class="listingblock">
<div class="title">JWT Expiry</div>
<div class="content">
<pre class="highlight"><code>              authentication       status              evergreen
database         service           service              client
   |               |                  |                    |
   |               |                  |    Status request  |
   |               |                  |      (with JWT)    |
   |               |                  |&lt;-------------------o
   |               |                  |      HTTP 401      |
   |               |                  o-------------------&gt;|
   |               |                  |             &lt;re-initiate login&gt;
   |               |                  |                    |
   |               |       PUT uuid signed by private key  |
   |    get uuid   |&lt;--------------------------------------o
   |   and pubkey  |                  |                    |
   |&lt;--------------o                  |                    |
   o--------------&gt;|                  |                    |
   |       &lt;verify signature&gt;         |                    |
   |     &lt;generate JWT enc token&gt;     |                    |
   |               |            HTTP 200 Ok                |
   |               |         (respond with JWT)            |
   |               o--------------------------------------&gt;|
   |               |                  |                    |
   |               |                  |    Status request  |
   |               |                  |      (with JWT)    |
   |               |                  |&lt;-------------------o
   |               |                  |      HTTP 200      |
   |               |                  o-------------------&gt;|
   |               |                  |                    |</code></pre>
</div>
</div>
<div class="paragraph">
<p>Making authenticated requests requires simply using the <code>Authorization</code> with
subsequent HTTP requests, for example:</p>
</div>
<div class="listingblock">
<div class="title">Headers for Authenticated Requests</div>
<div class="content">
<pre class="highlight"><code>Content-Type: application/json
Authorization: &lt;jwt-token&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="claims">Claims</h3>
<div class="paragraph">
<p>JSON Web Tokens (JWT) include the notion of "claims" which indicate to the
backend services whether the client possessing the token is authorized to
access that particular service.</p>
</div>
<div class="paragraph">
<p>Within the scope of this document, the Authentication Service must include the
"default" claims expected for clients in the JWT.</p>
</div>
<div class="paragraph">
<p>In this specification there is not any specific claims included in the design,
service/client claims should be considered subject to future designs and
implementations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_client_re_keying">Client Re-keying</h3>
<div class="paragraph">
<p>This specification does not include a design for clients to re-key and
transition from an older to a newer key. Such as in the case of a vulnerability
disclosure, algorithm change, or for other reasons. This topic <strong>must</strong> be
discussed in a future JEP but is not considered within the scope of this
document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_token_revocation">Token Revocation</h3>
<div class="paragraph">
<p>This document doesn&#8217;t specify the requirements or need for <strong>individual</strong> JWT
revocation, should that need arise, a future design will be required. For <em>en
masse</em> token revocation, in such cases as a compromise or other events which
necessitate all tokens be revoked, the backend services will need to have a
coordinated deployment to rotate their Pre-Shared Key in order to invalidate
all active JSON Web Tokens.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_motivation">Motivation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The motivation for this design should be fairly self evident. The Evergreen
distribution system requires a means of uniquely identifying clients and
managing their interactions with the various backend services. Not only must
these clients be uniquely identified, it&#8217;s important that clients cannot
maliciously, or accidentally forge requests, on behalf of other clients.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reasoning">Reasoning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Much of this design is influenced by large-scale Client/Service registration
and authentication systems familiar to the
<a href="https://github.com/rtyler">author</a>
from previous projects. A key goal in this design is to provide a secure means
of authentication, and avoid an Authentication Service becoming a single point
of failure in the backend services necessary to power the Evergreen
distribution system.</p>
</div>
<div class="paragraph">
<p>Some of the specific aspects of this design are discussed further below.</p>
</div>
<div class="sect2">
<h3 id="non-interactive">Non-interactive</h3>
<div class="ulist">
<ul>
<li>
<p>No user/password login for an administrator</p>
</li>
<li>
<p>Ensures not-yet-setup instances are still included in the Evergreen
distribution system</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jwt">JSON Web Tokens</h3>
<div class="paragraph">
<p><a href="https://jwt.io">JSON Web Tokens</a>
have a number of useful features, but by far the most useful feature of JWTs is
that they are <strong>stateless</strong>. This ensures that once the initial token negotiation
(see: <a href="#login-diagram">the login diagram</a>)
has completed, a JWT may be passed in <em>any</em> subsequent service request without
requiring the involvement of the Authentication Service or the database which
stores UUIDs and public keys.</p>
</div>
<div class="paragraph">
<p>Of secondary importance with JWT is the concept of <a href="#claims">Claims</a>, which allow
different clients to be given differing levels of access control to the backend
services. This is expected to be more useful in later stages of development for
the Evergreen distribution system when clients using an "alpha" or "beta"
channel receive access to different backend services that more generally
available clients will not yet have access to.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jwt_expiry">JWT Expiry</h3>
<div class="paragraph">
<p>Tokens, keys, or authentications without expirations are generally considered
an "anti-pattern", potentially leading to insecure applications for which users
have an "infinite login." Avoiding this is the primary reasoning for JWTs in
this design to expire after 14 days.</p>
</div>
<div class="paragraph">
<p>A secondary reasoning is that the expiry, and forcing a client to re-login,
allows the backend services to re-issue new <a href="#claims">Claims</a> for the client. Leaving
room for adjustment in the future to access control levels granted to the
clients.</p>
</div>
</div>
<div class="sect2">
<h3 id="_alternative_approaches">Alternative Approaches</h3>
<div class="paragraph">
<p>There were no substantial alternative approaches considered in the design of
this registration and authentication system. In order to remain
<a href="#non-interactive">Non-interactive</a>, the notion of a Username/Password combination for
registration is functionally impractical, if not impossible.</p>
</div>
<div class="paragraph">
<p>The use of OpenSSH-based public/private keys was considered early on, during
the "whiteboard stage", but was quickly discarded due to general lack of
wide-spread library support when compared to <a href="#jwt">JSON Web Tokens</a>.</p>
</div>
<div class="sect3">
<h4 id="_jenkins_instance_identity">Jenkins Instance Identity</h4>
<div class="paragraph">
<p>Jenkins has a built-in concept referred to as
<a href="https://wiki.jenkins.io/display/JENKINS/Instance+Identity">Instance Identity</a>
which provides a standard mechanism for both uniquely identifying a Jenkins
installation and permitting permitting asymmetrically-encrypted communications.</p>
</div>
<div class="paragraph">
<p>In a much earlier iteration of design of the process described in this
document, re-using this Instance Identity mechanism was considered.</p>
</div>
<div class="paragraph">
<p>Using the Instance Identity key generated by Jenkins requires a Jenkins
installation to boot at least once in order to generate the keys. In the case
of new Jenkins Evergreen installations, the first thing that the
<a href="https://github.com/jenkinsci/jep/tree/master/jep/301#evergreen-client">evergreen-client</a>
is expected to do is check with the Evergreen hosted services layer for the
latest version of Jenkins Evergreen, download the updates, and <em>then</em> start
Jenkins.</p>
</div>
<div class="paragraph">
<p>Rather than have a single unprotected/identified route in the
service backend for bootstrapping new installations, this design chooses a
separate public/private keypair which can be generated by <code>evergreen-client</code>
to ensure <em>all</em> requests for "updates" from the backend are similar signed and
registered.</p>
</div>
</div>
<div class="sect3">
<h4 id="_jwt_hmac_request_signing">JWT HMAC Request Signing</h4>
<div class="paragraph">
<p>One alternative approach suggested which still relies on <a href="#jwt">JSON Web Tokens</a> would be to
use JWT for signing the full requests, rather than treating the JWT as a
"bearer token."</p>
</div>
<div class="paragraph">
<p>This approach was rejected as there is little concern with authorized clients
<em>forging</em> requests, or <em>replay</em> attacks being launched against the Evergreen
backend service layer. Additionally, JWT HMAC request signing would require key
distribution <em>to</em> the client rather than simple JWT distribution to the client,
which adds significant additional key management complexity for little benefit.</p>
</div>
<div class="paragraph">
<p>As the backend services are all presumed to have equal levels of trust, the
Pre-Shared Key approach referenced above for the backend services, and an
opaque bearer token containing claims, is sufficient for the needs of Jenkins
Evergreen at this time.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_backwards_compatibility">Backwards Compatibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is no previous "Jenkins Evergreen registration system" and therefore no
backwards compatibility concerns.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security">Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Securely registering and authenticating clients is the primary motivation and
consequence of this design. This section is intentionally empty as security
concerns are manifest in all other sections of this document.</p>
</div>
<div class="sect2">
<h3 id="tls">TLS/SSL</h3>
<div class="paragraph">
<p>This document makes an assumption that <strong>all</strong> services <strong>must</strong> be only
accessible via a TLS encrypted channel, like other services currently hosted
under the
<a href="https://jenkins.io/">jenkins.io</a>
domain.</p>
</div>
</div>
<div class="sect2">
<h3 id="_certificate_pinning">Certificate Pinning</h3>
<div class="paragraph">
<p>While this document expects that backend services are served via <a href="#tls">TLS/SSL</a>, it
doesn&#8217;t describe additional security enhancements which may come in a future
design document such as:
<a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning">Certificate Pinning</a></p>
</div>
<div class="paragraph">
<p>Certificate pinning would ensure that clients are hard-coded to only trust the
Evergreen backend service layer, further reducing the potential for
Man-in-the-Middle attacks. At this point in time however, this is considered
unnecessary.</p>
</div>
<div class="paragraph">
<p>Another form of Certificate Pinning which may be considered in future designs
is the use of the <code>Expect-CT</code> header, as described
<a href="https://scotthelme.co.uk/a-new-security-header-expect-ct/">in this blog post</a>
which would require investigation into client-side support for the enforcement
of the HTTP header.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_infrastructure_requirements">Infrastructure Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The infrastructure requirements of this document are fundamentally the same as
the Evergreen hosted service layer&#8217;s existing, assumed, requirements: a
container orchestration layer to deploy service containers in (e.g. the
Registration service) and a PostgreSQL database for application storage.</p>
</div>
<div class="paragraph">
<p>The specifics of these requirements will be defined in a future
<a href="https://github.com/jenkins-infra/iep">Infrastructure Enhancement Proposal</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing">Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Testing of these registration and authentication flows is performed within the
context of the existing automated testing in the
<a href="https://github.com/jenkins-infra/evergreen">jenkins-infra/evergreen</a>
repository. This includes the expected amount of unit tests, and full
acceptance tests which invoke REST endpoints and act as mock clients.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prototype_implementation">Prototype Implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The prototype/reference implementation of this work can be found in the
<a href="https://github.com/jenkins-infra/evergreen">jenkins-infra/evergreen</a>
GitHub repository.</p>
</div>
<div class="paragraph">
<p>The registration component was introduced in
<a href="https://github.com/jenkins-infra/evergreen/pull/37">this pull request</a>.</p>
</div>
<div class="paragraph">
<p>The login component was introduced in
<a href="https://github.com/jenkins-infra/evergreen/pull/42">this pull request</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://groups.google.com/d/msgid/jenkinsci-dev/20180324020555.p26pfpln3j722m5r%40blackberry.coupleofllamas.com">Initial discussion thread on jenkinsci-dev@</a></p>
</li>
<li>
<p><a href="https://www.owasp.org/index.php/Key_Management_Cheat_Sheet">OWASP key management cheat sheet</a></p>
</li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. <a href="https://en.wikipedia.org/wiki/Uuid" class="bare">https://en.wikipedia.org/wiki/Uuid</a>
</div>
</div>
<ul class="pa0">
  
</ul>
<div class="mt6">
        
      </div>
    </main>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2018 My New Hugo Site
  </a>
    <div>








</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
