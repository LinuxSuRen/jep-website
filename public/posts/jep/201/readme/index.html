<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.40-DEV" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.e08a958ae3e530145318b6373195c765.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="" />
<meta property="og:description" content="Table 1. Metadata     JEP
 201
   Title
 Jenkins Configuration as Code
   Sponsor
 Ewelina Wilkosz from Praqma
   Status
 Accepted :ok_hand:
   Type
 Standards
   Created
 2017-11-07
   JIRA
 JENKINS-31094
     Table of Contents Abstract Specification Target Audience Goals Declarative configuration as code Intuitive schema YAML file format Per-Instance generated documentation Validation Mutable and immutable Minimal file content Avoid glue-code, support customization Tooling     Motivation Reasoning Mission and Priority Specification   Backwards Compatibility Schema changes   Security Infrastructure Requirements Testing Prototype Implementation References    Abstract Jenkins installation and setup requires various configuration steps users have to handle on the web UI." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/jep/201/readme/" />
















<meta itemprop="name" content="">
<meta itemprop="description" content="Table 1. Metadata     JEP
 201
   Title
 Jenkins Configuration as Code
   Sponsor
 Ewelina Wilkosz from Praqma
   Status
 Accepted :ok_hand:
   Type
 Standards
   Created
 2017-11-07
   JIRA
 JENKINS-31094
     Table of Contents Abstract Specification Target Audience Goals Declarative configuration as code Intuitive schema YAML file format Per-Instance generated documentation Validation Mutable and immutable Minimal file content Avoid glue-code, support customization Tooling     Motivation Reasoning Mission and Priority Specification   Backwards Compatibility Schema changes   Security Infrastructure Requirements Testing Prototype Implementation References    Abstract Jenkins installation and setup requires various configuration steps users have to handle on the web UI.">



<meta itemprop="wordCount" content="1555">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="Table 1. Metadata     JEP
 201
   Title
 Jenkins Configuration as Code
   Sponsor
 Ewelina Wilkosz from Praqma
   Status
 Accepted :ok_hand:
   Type
 Standards
   Created
 2017-11-07
   JIRA
 JENKINS-31094
     Table of Contents Abstract Specification Target Audience Goals Declarative configuration as code Intuitive schema YAML file format Per-Instance generated documentation Validation Mutable and immutable Minimal file content Avoid glue-code, support customization Tooling     Motivation Reasoning Mission and Priority Specification   Backwards Compatibility Schema changes   Security Infrastructure Requirements Testing Prototype Implementation References    Abstract Jenkins installation and setup requires various configuration steps users have to handle on the web UI."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      
      









    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <article class="flex-l flex-wrap justify-between mw8 center ph3 ph0-l">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1"></h1>
      
      <time class="f6 mv4 dib tracked" datetime="0001-01-01T00:00:00Z">January 1, 0001</time>
    </header>

    <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Metadata</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JEP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jenkins Configuration as Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sponsor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/ewelinawilkosz">Ewelina Wilkosz</a> from <a href="https://github.com/praqma">Praqma</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accepted :ok_hand:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standards</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-11-07</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JIRA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jenkins-ci.org/browse/JENKINS-31094">JENKINS-31094</a></p></td>
</tr>
</tbody>
</table>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_specification">Specification</a>
<ul class="sectlevel2">
<li><a href="#_target_audience">Target Audience</a></li>
<li><a href="#_goals">Goals</a>
<ul class="sectlevel3">
<li><a href="#_declarative_configuration_as_code">Declarative configuration as code</a></li>
<li><a href="#_intuitive_schema">Intuitive schema</a></li>
<li><a href="#_yaml_file_format">YAML file format</a></li>
<li><a href="#_per_instance_generated_documentation">Per-Instance generated documentation</a></li>
<li><a href="#_validation">Validation</a></li>
<li><a href="#_mutable_and_immutable">Mutable and immutable</a></li>
<li><a href="#_minimal_file_content">Minimal file content</a></li>
<li><a href="#_avoid_glue_code_support_customization">Avoid glue-code, support customization</a></li>
<li><a href="#_tooling">Tooling</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_motivation">Motivation</a></li>
<li><a href="#_reasoning">Reasoning</a>
<ul class="sectlevel2">
<li><a href="#_mission_and_priority_specification">Mission and Priority Specification</a></li>
</ul>
</li>
<li><a href="#_backwards_compatibility">Backwards Compatibility</a>
<ul class="sectlevel2">
<li><a href="#_schema_changes">Schema changes</a></li>
</ul>
</li>
<li><a href="#_security">Security</a></li>
<li><a href="#_infrastructure_requirements">Infrastructure Requirements</a></li>
<li><a href="#_testing">Testing</a></li>
<li><a href="#_prototype_implementation">Prototype Implementation</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jenkins installation and setup requires various configuration steps users have to handle on the web UI.
This provides flexibility for newcomers, but for repeated deployment, users need a way to automate configurating and installation.</p>
</div>
<div class="paragraph">
<p>Configuration-as-Code is a DevOps practice to manage software configuration as versioned files managed in SCM.
This configuration can be tested, discussed and validated in various environments before actually updating the production target.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specification">Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This specification describes the problem, and overall proposed solution, as it relates to the Jenkins project and existing structures.</p>
</div>
<div class="paragraph">
<p>The details of the exact behavior and implementation of most areas will be addressed in one or more separate JEPs.</p>
</div>
<div class="sect2">
<h3 id="_target_audience">Target Audience</h3>
<div class="paragraph">
<p>We have identified two personas as target Audience :</p>
</div>
<div class="paragraph">
<p><strong>Ben</strong> is system administrator in the company, managing services across all teams: LDAP, Mail, but also developers ressources like
repositories and CI servers. Ben’s favorite IDE is vi, his preferred language is bash (or maybe ruby|python) and only knows Java for the
amount of memory it requires and the delay to start a JVM. So he’s not a big fan of writing groovy scripts. He mostly knows Jenkins by the
UI and used to backup for whole <code>JENKINS_HOME</code> folder.</p>
</div>
<div class="paragraph">
<p><strong>Seb</strong> is working in a startup as DevOps engineer. He’s full time working with product team as a developer and managing development process
and resources (which makes 2 full times for one guy. This is a startup I said). Seb has deployed kubernetes as general purpose
infrastructure on the Cloud and deployed a git repo and few other services for his team. A Jenkins master is running there as well. He&#8217;s used
to upgrade Jenkins by running latest official docker image and re-using previous <code>JENKINS_HOME</code> volume.</p>
</div>
</div>
<div class="sect2">
<h3 id="_goals">Goals</h3>
<div class="sect3">
<h4 id="_declarative_configuration_as_code">Declarative configuration as code</h4>
<div class="paragraph">
<p>We want to introduce a simple way to define Jenkins configuration from a declarative document that would be accessible even to newcomers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_intuitive_schema">Intuitive schema</h4>
<div class="paragraph">
<p>Jenkins users should be able to figure out the configuration-as-code schema
without resorting to documentation, source code, or underlying XML configuration files.
Jenkins components and settings must be identified by convention
or user-friendly names rather than by actual implementation class name.</p>
</div>
<div class="paragraph">
<p>To achieve this, the configuration-as-code schema attempts to align with the classic Jenkins web UI model.
This means that as users switch to configuration-as-code, they should be able to look at the Web UI,
including pages and field labels and generally understand what their configuration schema will look like.</p>
</div>
</div>
<div class="sect3">
<h4 id="_yaml_file_format">YAML file format</h4>
<div class="paragraph">
<p>To avoid Configuration as Code being tied to a specific developer community,
it uses YAML as format to define Jenkins configuration.</p>
</div>
<div class="paragraph">
<p>YAML allows us to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Have a plain text, human readable format</p>
</li>
<li>
<p>Include comments to provide runnable sample configuration files</p>
</li>
<li>
<p>Be language ecosystem agnostic</p>
</li>
<li>
<p>Support JSON-schema validation</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_per_instance_generated_documentation">Per-Instance generated documentation</h4>
<div class="paragraph">
<p>There needs to be easily accessible documentation for the schema.
The configuration file format has to be well documented to assist end-users.
This documentation is generated based on the live Jenkins instance to ensure it’s in sync,
similar to what Pipeline DSL documentation does with the Snippet Generator.
General documentation independent of a running Jenkins instance may also be created (either
generated or written manually) similar to the
<a href="https://jenkinsci.github.io/job-dsl-plugin/">Job DSL plugin documentation</a>.
This documentation is not be guaranteed to apply to a particular instance or be complete for all versions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validation">Validation</h4>
<div class="paragraph">
<p>A user must be able to validate the configuration file before attempting to apply it.
This validation should be doable both on a running Jenkins master or independently.
The schema is still instance specific, likely generated at the same time as documentation.
The plugin may need to generate some schema that could also be used with an IDE / editor to assist writing configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mutable_and_immutable">Mutable and immutable</h4>
<div class="paragraph">
<p>Depending on the audience, some users want configuration-as-code to generate a working Jenkins master
with some initial configuration, but also let the actual administrator make changes.
Such use case is mostly looking for “recipe for a new Jenkins master”.
Others want configuration-as-code to fully control the master, and be able to apply updates, comparable to Chef/Puppet/Ansible management.
Both use cases can be supported (as well as a mix of both).
The former just uses the configuration-as-code mechanism for initial setup.
The latter would apply the configuration when updates are detected on file.
It could benefit some way to lock down configuration for components configured by the configuration-as-code mechanism to be read-only on web UI.</p>
</div>
</div>
<div class="sect3">
<h4 id="_minimal_file_content">Minimal file content</h4>
<div class="paragraph">
<p>Unlike underlying XML configuration files, users shouldn’t have to specify <em>all</em> the settings.
They should only have to include the setting they care about.</p>
</div>
</div>
<div class="sect3">
<h4 id="_avoid_glue_code_support_customization">Avoid glue-code, support customization</h4>
<div class="paragraph">
<p>We want configuration-as-code to apply to the majority of Jenkins components without need for dedicated glue-code.
Configuration as Code doesn’t define a model for each and every component it can manage.
It instead relies on introspection to discover at runtime the data model exposed by a Jenkins instance and installed plugins.
Some components with more complex or corner-case designs may still need to implement some custom glue code to make it possible to represent their configuration in a sensible fashion.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tooling">Tooling</h4>
<div class="paragraph">
<p>There will be cases where the Configuration-as-Code plugin alone is not sufficient address users needs.
Related tools will need to be created for these cases to help devs and users.
These tools might, for example, consume the schema generated by the plugin
and check an existing YAML file for breaking changes.</p>
</div>
<div class="paragraph">
<p>The details of the exact behavior and implementation of this area will be addressed in a separate JEP.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_motivation">Motivation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many Companies rely on dozens or hundred Jenkins masters, and as such require some way to control their setup and initial configuration.</p>
</div>
<div class="paragraph">
<p>There&#8217;s various ways to manage Jenkins configuration without human interaction:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Chef / Puppet / Ansible recipes. Some are <a href="https://github.com/jenkinsci/puppet-jenkins">maintained by Jenkins community</a></p>
</li>
<li>
<p>Groovy init scripts</p>
</li>
<li>
<p>CLI from shell scripts</p>
</li>
<li>
<p>XML templating</p>
</li>
<li>
<p>custom plugins like <a href="https://github.com/jenkinsci/system-config-dsl-plugin">system-config-dsl-plugin</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All those require a deep knowledge of Jenkins internal model and/or xml storage format, to correctly invoke API methods from script or
produce adequate xml structure, while end user only knows Jenkins Web UI. Those approaches make configuration-automation a reserved
practice for advanced Jenkins users.</p>
</div>
<div class="paragraph">
<p>Configuration as Code should not be available only to advanced Jenkins users. Typically, when selecting implementation for an extension
point, a non-expert end-user doesn&#8217;t know the actual class name to be used internally and stored in xml configuration; they just select a
label in a dropdown list. This is what we want to offer “as-code”.</p>
</div>
<div class="paragraph">
<p>Configuration as Code is a simple text file with both documentation and schema that would make it possible for any Jenkins user to replicate
the configuration they would previously setup by hand on web UI.</p>
</div>
<div class="paragraph">
<p>This is a major differentiator vs Groovy init scripts used by many Advanced Jenkins users, who are confident with internal APIs and Groovy
syntax. Using a basic text file format with validation makes this feature available to arbitrary DevOps teams without the need to be familiar
with Jenkins or Groovy.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reasoning">Reasoning</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_mission_and_priority_specification">Mission and Priority Specification</h3>
<div class="paragraph">
<p>This document does not propose a specific design or implementation, as other JEPs might.
This is intentional.
This document specifies the concept of "Jenkins Configuration-as-Code" and the mission and priorities of the project.
Later related JEPs will address design and implementation.
Limiting the scope of this JEP to high-level goals will let us build a solid consensus for that direction separate from the design of individual features.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_backwards_compatibility">Backwards Compatibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuration-as-Code is intended to run as an additional Jenkins component (generally, a plugin) and not require dedicated extension
integrated in <code>jenkins-core</code> nor specific API implemented by plugins. We only require them to follow some convention in the way they expose
configuration attributes (i.e <code>DataBoundSetter|Constructor</code>)</p>
</div>
<div class="sect2">
<h3 id="_schema_changes">Schema changes</h3>
<div class="paragraph">
<p>Configuration-as-Code doesn&#8217;t define the exact model for the configuration expressed in the YAML file.
The YAML schema will depend on a specific versions of <code>jenkins-core</code> and plugins being used at runtime.
This limits the ability of the Configuration-as-Code plugin to ensure schema compatibility between
different versions of Jenkins Core and plugins.
Still, schema will be validated before applying it to a Jenking instance,
and tooling will be created to further limit user pain as much as possilbe.</p>
</div>
<div class="paragraph">
<p>The details of the exact behavior and implementation of this area will be addressed in a separate JEP.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security">Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sensitive information should <em>not</em> be exposed directly within the yaml configuration file.
Configuration-as-Code supports string expansion using a bash-like <code>${KEY}</code> syntax for string based values. Configuration-as-Code also defines
an API to connect with third-party secret-sources. Out of the box we support environment variable expansion, which should only be considered
for testing purpose, as well as file-based secret source (docker-secret, kubernetes-secret) and a Vault connector. Third party plugins can also be developed to offer comparable support with other secret providers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_infrastructure_requirements">Infrastructure Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>N/A</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing">Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will provide a set of configuration samples for various popular plugins,
both as documentation for newcomers and for acceptance testing of the
implementation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prototype_implementation">Prototype Implementation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/jenkinsci/configuration-as-code-plugin" class="bare">https://github.com/jenkinsci/configuration-as-code-plugin</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-31094">Initial discussion</a></p>
</li>
<li>
<p><a href="https://groups.google.com/d/msg/jenkinsci-dev/6TjlxEqHUEs/nKSG1xSkCQAJ">subsequent discussion</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<ul class="pa0">
  
</ul>
<div class="mt6">
        
      </div>
    </main>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2018 My New Hugo Site
  </a>
    <div>








</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
